/******************************************************************************
**
** 文件名   : port_spi.c
** 版权所有 : (c) 2005-2020 厦门雅迅网络股份有限公司
** 文件描述 : 实现平台的spi驱动接口
** 创建人   : cym, 2020年12月15日 
**
*******************************************************************************
**             修改历史记录
**===============================================================================
**| 日期        | 作者    |  修改记录
**===============================================================================
**| 2020 /12/15 | cym     |  创建该文件
**
*********************************************************************************/
#include "dal_include.h"
#include "dal_spi.h"
#include "port_spi.h"

/*
********************************************************************************
* 定义宏
********************************************************************************
*/

/*
********************************************************************************
* 定义配置参数
********************************************************************************
*/


/*
********************************************************************************
* 定义模块数据结构
********************************************************************************
*/


/*
********************************************************************************
* 定义模块变量
********************************************************************************
*/

/*
********************************************************************************
* 定义本地接口
********************************************************************************
*/

/*
********************************************************************************
* 定义对外接口
********************************************************************************
*/

/*****************************************************************************
**	函数名:  PORT_SpiReadByte
**	函数描述: 读取1字节
**	参数:	 [in] idx : spi编号
**	返回:	 -1:表示无效,正值表示读取的有效数据
*****************************************************************************/
INT32S PORT_SpiReadByte(PORT_SPI_IND_E idx)
{
    return Spix_ReadByte((SPI_IND_E)idx);
}

/*******************************************************************
** 函数名:     PORT_SpiRecvBufUsed
** 函数描述:   SPIX接收的大小
** 参数:       [in] idx : spi编号
** 返回:       接收大小
********************************************************************/
INT32U PORT_SpiRecvBufUsed(PORT_SPI_IND_E idx)
{
    return Spix_RecvBufUsed((SPI_IND_E)idx);
}

/*******************************************************************
** 函数名:     Spix_RecvBufReset
** 函数描述:   复位接收缓存
** 参数:       [in] idx : spi编号
** 返回:       无
********************************************************************/
void PORT_SpiRecvBufReset(PORT_SPI_IND_E idx)
{
    Spix_RecvBufReset((SPI_IND_E)idx);
}

/*******************************************************************
** 函数名:     Spix_SendByte
** 函数描述:   SPIX发送单个字节
** 参数:       [in] idx : spi编号
               [in] byte: 字节数据
** 返回:       无
********************************************************************/
BOOLEAN PORT_SpiSendByte(PORT_SPI_IND_E idx, INT8U byte)
{
    return Spix_SendByte((SPI_IND_E)idx, byte);
}

/*******************************************************************
** 函数名:     PORT_SpiSendData
** 函数描述:   SPIX发送连续数据
** 参数:       [in] idx : spi编号
               [in] ptr:   数据指针
**             [in] tlen:  数据长度
** 返回:       发送结果
********************************************************************/
BOOLEAN PORT_SpiSendData(PORT_SPI_IND_E idx, INT8U *ptr, INT32U tlen)
{
    return Spix_SendData((SPI_IND_E)idx, ptr, tlen);
}

/*******************************************************************
** 函数名:     PORT_SpiClose
** 函数描述:   SPI关闭操作
** 参数:       [in] idx : spi编号
** 返回:       TRUE : 关闭成功 ；FALSE : 关闭失败
********************************************************************/
BOOLEAN PORT_SpiClose(PORT_SPI_IND_E idx)
{
    return Spix_Close_Port((SPI_IND_E)idx);
}

/*******************************************************************
** 函数名:     PORT_SpiOpen
** 函数描述:   SPI打开操作
** 参数:       [in] idx : spi编号
               [in] init : 初始化结构
** 返回:       TRUE : 打开成功 ；FALSE : 打开失败
********************************************************************/
BOOLEAN PORT_SpiOpen(PORT_SPI_IND_E idx, PORT_SPI_INIT_T init)
{
    return Spix_Open_Port((SPI_IND_E)idx, init.mode, init.hdl_mode, init.baud, init.clock_mode);    
}

/*******************************************************************
** 函数名:     PORT_SpiIsSendIle
** 函数描述:   发送是否在空闲状态
** 参数:       [in] idx : spi编号
** 返回:       TRUE : 空闲 FALSE: 非空闲状态
********************************************************************/
BOOLEAN PORT_SpiIsSendIle(PORT_SPI_IND_E idx)
{
    return Spix_IsSendIle((SPI_IND_E)idx);
}
